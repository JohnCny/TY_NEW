<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.cardpay.pccredit.customer.dao.IBusinessTacklingDao">
	
	<resultMap id="ResultMap" type="com.cardpay.pccredit.jnpad.model.CustomerInfo">
		<result property="customerId" column="CUSTOMER_ID" />
		<result property="cardId" column="CARD_ID" />
	</resultMap>
	
	<resultMap id="CardIdResultMap" type="com.cardpay.pccredit.customer.model.BusinessTackling">
		<result property="cardId" column="zjhm" />
		<result property="customerName" column="khmc" />
		<result property="safeType" column="BXLX" />
		<result property="safeName" column="BXMC" />
		<result property="safeCompany" column="CBGS" />
		<result property="productName" column="PRODUCT_NAME" />
		<result property="interest" column="htll" />
		<result property="money" column="Ffje" />
		<result property="settle" column="sfjq" />
		<result property="manager" column="khjl" />
	</resultMap>
	
	<select id="queryById" resultMap="ResultMap" parameterType="String">
		SELECT CARD_ID FROM BASIC_CUSTOMER_INFORMATION where id=#{customerId}
	</select>
	
	
	<select id="queryByIdCard" resultMap="CardIdResultMap" parameterType="String">
		select 
		base.khmc,base.zjhm,
		safe.BXLX,safe.BXMC,safe.CBGS,
		tpt.PRODUCT_NAME,tkmx.htll,tkmx.Ffje,tkmx.sfjq,tkmx.khjl
		from
		ty_customer_base base,
		ty_repay_tkmx tkmx,
		ty_product_type tptï¼Œ
		TY_CUSTOMER_SAFE safe
		where 
		tkmx.cpmc=tpt.product_code
		and base.khh=tkmx.khh
		and safe.khnm=base.khnm
		and base.zjhm=#{idcard}
	</select>
</mapper>
